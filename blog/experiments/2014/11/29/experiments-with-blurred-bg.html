<!DOCTYPE html>
<html>
<head>
  
    <meta name="og:image" content="https://mir4a.pp.ua/images/Martynov_Myroslav_Front-end_developer.jpg" />
    <meta name="og:image:type" content="image/jpeg" />
    <meta name="og:image:width" content="500" />
    <meta name="og:image:height" content="500" />
    <meta name="twitter:card" content="summary" />
  

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width" />
  <title>Experiments with blurred background</title>

  <meta name="author" content="Myroslav Martynov" />
  <meta name="p:domain_verify" content="3e533f2f9b9d13c8cd8a2fda37931308" />

  <meta name="og:url" content="www.mir4a.pp.ua" />
  <meta name="og:type" content="website" />
  <meta name="og:title" content="Experiments with blurred background" />
  <meta name="og:locale" content="en_US" />


  <meta name="og:site_name" content="Myroslav Martynov" />
  <meta name="og:updated_time" content="2022-10-04 12:13:23 +0200" />

  <meta name="fb:profile_id" content="mir4a" />
  <meta name="fb:app_id" content="639182646216193" />

  <meta name="twitter:title" content="Experiments with blurred background" />
  <meta name="twitter:creator" content="@mir4a_en" />

  
  
    
      <meta name="twitter:description" content="This summer I was involved in studying front-end course sponsored by Binary Studio and the exit course project we’ve built was Hurri..." />
      <meta name="description" content="This summer I was involved in studying front-end course sponsored by Binary Studio and the exit course project we’ve built was Hurri..." />
    
  

  <meta name="twitter:domain" content="www.mir4a.pp.ua" />
  <meta name="twitter:site" content="@mir4a_en" />
  <meta name="twitter:image:src" content="https://mir4a.pp.ua/images/social_100.jpg" />

  <link rel="stylesheet" href="/css/fap.css" />
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2">
</head>
<body>

<div class="wrap">

  <div class="container">
    <div class="header">
      <a class="logo" href="/">Martynov Myroslav</a>
    </div>

    <article itemscope itemtype="http://schema.org/BlogPosting" role="article">

  <h1 itemprop="name headline">Experiments with blurred background</h1>
  <time class="meta" itemprop="datePublished" datetime="29 Nov 2014">
    29 Nov 2014
  </time>

  
  <br>
  <small><b>Tags:</b></small>
  
  <small><a href="/tag/blur">blur,</a></small>
  
  <small><a href="/tag/css">css,</a></small>
  
  <small><a href="/tag/throttle">throttle,</a></small>
  
  <small><a href="/tag/debounce">debounce,</a></small>
  
  <small><a href="/tag/jquery">jquery</a></small>
  
  

  
  <br>
  <small><b>Category:</b></small>
  <small><a href="/category/experiments">experiments</a></small>
  

  <div class="post" itemprop="articleBody">
    <p>This summer I was involved in studying front-end course sponsored by Binary Studio and the exit course project we’ve built was <a href="http://github.com/msemenistyi/hurri">Hurri</a> — the project that streaming music from social network.
One of the task was to build fancy sign up page and I was thought that it would be great to made blurred bg with grids of greatest albums cover pics and put some fancy action on it.
For the action I decided to use some kind of window which is moving by cursor and show un-blurred view of bg. Below you can see how to implement this using html, css and javascript.</p>

<p>##1. Making layers</p>

<p>The idea is to create two layers. First is laying behind and has <code class="highlighter-rouge">z-index:0</code> and blurred effect. The second is laying upward with <code class="highlighter-rouge">z-index:1</code> and has the same image as first but without blur effect.
Both layers are positioned the same way and has <code class="highlighter-rouge">position:absolute</code> and stretched outside of view port using offset:</p>

<figure class="highlight"><pre><code class="language-sass" data-lang="sass"><span class="c1">// Simple mixin for prefixed attributes</span>
<span class="nf">=blur</span><span class="p">(</span><span class="nv">$radius</span><span class="p">)</span>
  <span class="na">-webkit-filter</span><span class="p">:</span> <span class="nf">blur</span><span class="p">(</span><span class="nv">$radius</span><span class="p">)</span>
  <span class="nl">filter</span><span class="p">:</span> <span class="nf">blur</span><span class="p">(</span><span class="nv">$radius</span><span class="p">)</span>

<span class="c1">// Variable with offset value</span>
<span class="nv">$offset_position</span><span class="p">:</span> <span class="m">-20px</span>

<span class="nc">.blurred_bg</span><span class="o">,</span> <span class="nc">.blurred_bg_hover</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">fixed</span>
  <span class="nl">top</span><span class="p">:</span> <span class="nv">$offset_position</span>
  <span class="nl">right</span><span class="p">:</span> <span class="nv">$offset_position</span>
  <span class="nl">bottom</span><span class="p">:</span> <span class="nv">$offset_position</span>
  <span class="nl">left</span><span class="p">:</span> <span class="nv">$offset_position</span>
  <span class="nl">background</span><span class="p">:</span> <span class="sx">url("/images/experimental/bg_covers.jpg")</span>
  <span class="nl">background-size</span><span class="p">:</span> <span class="n">cover</span>

<span class="c1">// First layer</span>
<span class="nc">.blurred_bg</span>
  <span class="nl">z-index</span><span class="p">:</span> <span class="m">0</span>
  <span class="nd">+blur</span><span class="p">(</span><span class="m">5px</span><span class="p">)</span>
  
<span class="c1">// Second layer</span>
<span class="nc">.blurred_bg_hover</span>
  <span class="nl">clip</span><span class="p">:</span> <span class="nf">rect</span><span class="p">(</span><span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span><span class="p">)</span>
  <span class="nl">z-index</span><span class="p">:</span> <span class="m">1</span></code></pre></figure>

<p>You may notice, I’m using <code class="highlighter-rouge">clip</code> which is very old property and allow to clip rectangular shapes and even <strong>IE4-7</strong> support this property but with comma delimiter instead of space for coordinate values.
There is another property <code class="highlighter-rouge">clip-path</code> which can use svg path for masking. Great <a href="http://www.html5rocks.com/en/tutorials/masking/adobe/" target="_blank">article</a> on HTML5 Rocks explaining how to use <code class="highlighter-rouge">clip-path</code>.</p>

<p>That’s it. Basic layout is ready. Of course, markup is very simple and contains of two divs:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"blurred_bg"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"blurred_bg_hover"</span><span class="nt">&gt;&lt;/div&gt;</span></code></pre></figure>

<p>##2. Adding some action</p>

<p>Originally, the project was written on <strong>BackboneJS</strong> and it has <strong>Underscore</strong> as helper library. And Underscore has useful method <a href="http://underscorejs.org/#throttle" target="_blank"><code class="highlighter-rouge">_.throttle()</code></a>.
It will help prevent calling function every millisecond, because I’m going to call clipping every time user move cursor without throttling it may cause some lags.
For this example I will use jQuery and Underscore, but there is numerous solutions in the internet written on plain js.</p>

<p>So, idea is to set clipping coordinates according cursor’s position. But first, let’s inject jquery and underscore:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//code.jquery.com/jquery-1.11.0.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://underscorejs.org/underscore-min.js"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure>

<p>Ok, jquery will return event object for our function on <strong>mousemove</strong> event, so I can find out position X and Y for the pointer.
By subtract or add some <strong>gap</strong> value I can set coordinates for clip rectangle.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">blur</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.blurred_bg_hover</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// Gap with value of 75 will bring us 150px square for clip.</span>
<span class="kd">var</span> <span class="nx">gap</span> <span class="o">=</span> <span class="mi">75</span><span class="p">;</span>

<span class="c1">// Function which is setup coordinates for clip.</span>
<span class="kd">function</span> <span class="nx">clipMove</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">-</span> <span class="nx">gap</span><span class="p">,</span>
      <span class="nx">x1</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">+</span> <span class="nx">gap</span><span class="p">,</span>
      <span class="nx">y2</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">+</span> <span class="nx">gap</span><span class="p">,</span>
      <span class="nx">x2</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">-</span> <span class="nx">gap</span><span class="p">;</span>
  <span class="nx">blur</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="dl">'</span><span class="s1">clip</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">rect(</span><span class="dl">'</span><span class="o">+</span> <span class="nx">y1</span> <span class="o">+</span><span class="dl">'</span><span class="s1">px, </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">x1</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px, </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">y2</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px, </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">x2</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px)</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Throttled version of clipMove function which would be called on mousemove, </span>
<span class="c1">// but fired original function only every 80 milliseconds.</span>
<span class="kd">var</span> <span class="nx">throttled</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">throttle</span><span class="p">(</span><span class="nx">clipMove</span><span class="p">,</span> <span class="mi">80</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">blur</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">mousemove</span><span class="dl">'</span><span class="p">,</span> <span class="nx">throttled</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>I choose 80 milliseconds because for me it feels smooth on the final result and cursor has smooth moving too without any debouncing.</p>

<p>That’s it. You can check demo <a href="https://mir4a.pp.ua/experimental/blur.html">here</a></p>

  </div>

  

  

  <div class="share_links">
    <a class="ln share_link"
       href="https://www.linkedin.com/shareArticle?mini=true&summary=This+summer+I+was+involved+in+studying+front-end+course+sponsored+by+Binary+Studio+and+the+exit+course+project+we%E2%80%99ve+built+was+Hurri...&source=https%3A%2F%2Fmir4a.pp.ua&title=Experiments+with+blurred+background&url=https%3A%2F%2Fmir4a.pp.ua%2Fblog%2Fexperiments%2F2014%2F11%2F29%2Fexperiments-with-blurred-bg.html"
       target="_blank"
       onclick="javascript:window.open(this.href,'linkedin-share-dialog','width=626,height=436');return false;">
      linkedin
    </a>
    <a class="tw share_link"
       href="https://twitter.com/share?text=Experiments+with+blurred+background&hashtags=+blur%2Ccss%2Cthrottle%2C+&url=https%3A%2F%2Fmir4a.pp.ua%2Fblog%2Fexperiments%2F2014%2F11%2F29%2Fexperiments-with-blurred-bg.html&via=mir4a_en"
       target="_blank"
       onclick="javascript:window.open(this.href,'twitter-share-dialog','width=626,height=436');return false;">
      twitter
    </a>
    <a class="fb share_link"
       href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fmir4a.pp.ua%2Fblog%2Fexperiments%2F2014%2F11%2F29%2Fexperiments-with-blurred-bg.html"
       target="_blank"
       onclick="javascript:window.open(this.href,'facebook-share-dialog','width=626,height=436');return false;">
      facebook
    </a>
  </div>

  <hr class="dashed">

  <div id="disqus_thread" data-disqus-identifier="/blog/experiments/2014/11/29/experiments-with-blurred-bg">
    <a class="show_comments" href="#disqus_thread">Show comments</a>
  </div>

  <hr class="dashed">

  <section class="author_section" itemprop="author" itemscope itemtype="http://schema.org/Person">
    
    <div class="clearfix">
      <img src="https://mir4a.pp.ua/images/mir4a_64.jpg" alt="Martynov Myroslav" width="64" height="64" class="ava" itemprop="image" >
      Written by <strong itemprop="name">Myroslav Martynov</strong><br/>
      <div itemprop="description">
        Front-end developer from Europe<br/>
      </div>
      
      <b>Published at:</b> 2014-11-29
    </div>
  </section>

</article>
<script src="/javascripts/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="/javascripts/comments.js"></script>


    <div class="footer">
  &copy; Myroslav Martynov, 2014&mdash;2022
</div>

  </div>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57218010-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>
